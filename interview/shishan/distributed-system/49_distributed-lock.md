# 、有哪个业务场景是需要用分布式锁的?为什么要使用?`

下订单的的环节,支付之前,创建一个订单

创建一个订单,订单里会指定对哪些商品要购买多少件,此时就需要走一个流程,校验一下库存

查库存,确认库存充足,锁定库存，这个库存必须用分布式锁,锁掉这个商品的库存,对一个商品的购买同一时间只能有一个人操作

总结：当多个服务需要竞争一个单体资源时，可以考虑加上分布式锁。如果并发量高的话，可以考虑拆分掉那个单体资源，50个拆成5个10个资源，从而缩小锁的粒度，提高吞吐量